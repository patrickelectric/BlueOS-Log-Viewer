(function(){"use strict";var e={8077:function(e,n,t){var o=t(9242),i=t(3396),r=t(7139);const l={id:"app"},s=(0,i._)("h2",null,"BlueOS System Log Viewer",-1),a={key:0},u={key:1},c=["value"],g={key:2},d={key:3};function f(e,n,t,f,v,p){const w=(0,i.up)("file-upload"),h=(0,i.up)("log-viewer");return(0,i.wg)(),(0,i.iD)("div",l,[s,(0,i.Wm)(w,{onLogsUpdated:f.updateLogs,onProcessing:f.processing},null,8,["onLogsUpdated","onProcessing"]),f.currentMsg?((0,i.wg)(),(0,i.iD)("div",a," Processing: "+(0,r.zw)(f.currentMsg),1)):(0,i.kq)("",!0),f.allLogs.length?((0,i.wg)(),(0,i.iD)("div",u,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":n[0]||(n[0]=e=>f.selectedService=e)},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(f.availableServices,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e,value:e},(0,r.zw)(e),9,c)))),128))],512),[[o.bM,f.selectedService]]),(0,i.Wm)(h,{logData:f.filteredLogs},null,8,["logData"])])):f.currentMsg?((0,i.wg)(),(0,i.iD)("div",g,"Loading...")):((0,i.wg)(),(0,i.iD)("div",d,"No logs available."))])}var v=t(4870);const p={class:"file-upload"};function w(e,n,t,o,r,l){return(0,i.wg)(),(0,i.iD)("div",p,[(0,i._)("input",{type:"file",onChange:n[0]||(n[0]=(...e)=>o.handleFileUpload&&o.handleFileUpload(...e)),accept:".zip"},null,32)])}t(560);var h=t(4730),y=t.n(h),m=t(6813),b={emits:["logs-updated","processing"],setup(e,{emit:n}){const t=(0,v.iH)(null),o=async e=>{const t=e.target.files[0];if(!t)return;const o=await y().loadAsync(t),i=[];let r=null,l=0;for(const s of Object.keys(o.files)){console.log(`${s}`);const e=D(s),t=k(s);if(console.log(`${e} -> ${t}`),n("processing",s),null!=t)if(s.endsWith(".gz")){if(r!=e&&(l=0,r=e),l>5){console.log("Skip");continue}l+=1;const n=await o.files[s].async("uint8array");let a=`File: ${s}\n\n`;a+=m.ZP.inflate(n,{to:"string"}),i.push({serviceName:e,dateTime:t,content:a})}else if(s.endsWith(".log")){let n=`File: ${s}\n\n`;n+=await o.files[s].async("string"),i.push({serviceName:e,dateTime:t,content:n})}}i.sort(((e,n)=>n.dateTime-e.dateTime)),n("logs-updated",i)};return{fileContent:t,handleFileUpload:o}}};function D(e){const n=e.split("/");return n[0]}function k(e){let n,t,o,i;if(e.endsWith(".log")?(n=/(\d{2}-\d{2}-\d{4})_(\d{2}:\d{2}:\d{2})\.log/,t=e.match(n),console.log(t),t&&t.length>2&&(o=`${t[1].substring(6,10)}-${t[1].substring(0,2)}-${t[1].substring(3,5)}`,i=t[2].replace(/-/g,":"))):(n=/(\d{8})-(\d{6})\.(zip|gz)/,t=e.match(n),t&&t.length>2&&(o=`${t[1].substring(0,4)}-${t[1].substring(4,6)}-${t[1].substring(6,8)}`,i=`${t[2].substring(0,2)}:${t[2].substring(2,4)}:${t[2].substring(4,6)}`)),o&&i){const e=`${o}T${i}`;return console.log(e),new Date(e)}return null}var $=t(89);const _=(0,$.Z)(b,[["render",w]]);var O=_;const L=e=>((0,i.dD)("data-v-0e2d7394"),e=e(),(0,i.Cn)(),e),S={class:"log-viewer"},z=L((()=>(0,i._)("h2",null,"BlueOS System Log Viewer",-1))),F={key:0,class:"log-content"},N={key:1,class:"no-log"};function T(e,n,t,o,l,s){return(0,i.wg)(),(0,i.iD)("div",S,[z,t.logData&&t.logData.length?((0,i.wg)(),(0,i.iD)("div",F,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.logData,((e,n)=>((0,i.wg)(),(0,i.iD)("div",{key:n,class:"log-entry"},[(0,i._)("h3",null,(0,r.zw)(e.serviceName)+" - "+(0,r.zw)(o.formatDate(e.dateTime)),1),(0,i._)("pre",null,(0,r.zw)(e.content),1)])))),128))])):((0,i.wg)(),(0,i.iD)("div",N," No logs to display. "))])}var j={props:{logData:Array},setup(){const e=(0,i.MW)({logData:{type:Array,default:()=>[]}}),n=e=>e?e.toLocaleString():"";return{...e,formatDate:n}}};const M=(0,$.Z)(j,[["render",T],["__scopeId","data-v-0e2d7394"]]);var U=M,H={components:{FileUpload:O,LogViewer:U},setup(){const e=(0,v.iH)([]),n=(0,v.iH)(""),t=(0,v.iH)(""),o=o=>{e.value=o,n.value=o.length>0?o[0].serviceName:"",t.value=""},r=e=>{t.value=e},l=(0,i.Fl)((()=>e.value.filter((e=>e.serviceName===n.value)))),s=(0,i.Fl)((()=>[...new Set(e.value.map((e=>e.serviceName)))]));return{allLogs:e,selectedService:n,currentMsg:t,filteredLogs:l,availableServices:s,updateLogs:o,processing:r}}};const P=(0,$.Z)(H,[["render",f]]);var W=P;(0,o.ri)(W).mount("#app")}},n={};function t(o){var i=n[o];if(void 0!==i)return i.exports;var r=n[o]={exports:{}};return e[o].call(r.exports,r,r.exports,t),r.exports}t.m=e,function(){var e=[];t.O=function(n,o,i,r){if(!o){var l=1/0;for(c=0;c<e.length;c++){o=e[c][0],i=e[c][1],r=e[c][2];for(var s=!0,a=0;a<o.length;a++)(!1&r||l>=r)&&Object.keys(t.O).every((function(e){return t.O[e](o[a])}))?o.splice(a--,1):(s=!1,r<l&&(l=r));if(s){e.splice(c--,1);var u=i();void 0!==u&&(n=u)}}return n}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[o,i,r]}}(),function(){t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,{a:n}),n}}(),function(){t.d=function(e,n){for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){var e={143:0};t.O.j=function(n){return 0===e[n]};var n=function(n,o){var i,r,l=o[0],s=o[1],a=o[2],u=0;if(l.some((function(n){return 0!==e[n]}))){for(i in s)t.o(s,i)&&(t.m[i]=s[i]);if(a)var c=a(t)}for(n&&n(o);u<l.length;u++)r=l[u],t.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return t.O(c)},o=self["webpackChunkmy_log_viewer"]=self["webpackChunkmy_log_viewer"]||[];o.forEach(n.bind(null,0)),o.push=n.bind(null,o.push.bind(o))}();var o=t.O(void 0,[998],(function(){return t(8077)}));o=t.O(o)})();
//# sourceMappingURL=app.6ecedd03.js.map