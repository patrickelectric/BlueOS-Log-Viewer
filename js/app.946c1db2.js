(function(){"use strict";var e={713:function(e,t,n){var o=n(9242),i=n(3396),r=n(7139);const l={id:"app"},a=(0,i._)("h2",null,"BlueOS System Log Viewer",-1),s={key:0},u=["value"],c={key:1};function g(e,t,n,g,d,f){const v=(0,i.up)("file-upload"),p=(0,i.up)("log-viewer");return(0,i.wg)(),(0,i.iD)("div",l,[a,(0,i.Wm)(v,{onLogsUpdated:g.updateLogs},null,8,["onLogsUpdated"]),g.allLogs.length?((0,i.wg)(),(0,i.iD)("div",s,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>g.selectedService=e)},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(g.availableServices,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e,value:e},(0,r.zw)(e),9,u)))),128))],512),[[o.bM,g.selectedService]]),(0,i.Wm)(p,{logData:g.filteredLogs},null,8,["logData"])])):((0,i.wg)(),(0,i.iD)("div",c,"No logs available."))])}var d=n(4870);const f={class:"file-upload"};function v(e,t,n,o,r,l){return(0,i.wg)(),(0,i.iD)("div",f,[(0,i._)("input",{type:"file",onChange:t[0]||(t[0]=(...e)=>o.handleFileUpload&&o.handleFileUpload(...e)),accept:".zip"},null,32)])}n(560);var p=n(4730),w=n.n(p),h=n(6813),m={emits:["logs-updated"],setup(e,{emit:t}){const n=(0,d.iH)(null),o=async e=>{const n=e.target.files[0];if(!n)return;const o=await w().loadAsync(n),i=[];for(const t of Object.keys(o.files)){console.log(`${t}`);const e=y(t),n=b(t);if(console.log(`${e} -> ${n}`),null!=n)if(t.endsWith(".gz")){const r=await o.files[t].async("uint8array");let l=`File: ${t}\n\n`;l+=h.ZP.inflate(r,{to:"string"}),i.push({serviceName:e,dateTime:n,content:l})}else if(t.endsWith(".log")){let r=`File: ${t}\n\n`;r+=await o.files[t].async("string"),i.push({serviceName:e,dateTime:n,content:r})}}i.sort(((e,t)=>t.dateTime-e.dateTime)),t("logs-updated",i)};return{fileContent:n,handleFileUpload:o}}};function y(e){const t=e.split("/");return t[0]}function b(e){let t,n,o,i;if(e.endsWith(".log")?(t=/(\d{2}-\d{2}-\d{4})_(\d{2}:\d{2}:\d{2})\.log/,n=e.match(t),console.log(n),n&&n.length>2&&(o=`${n[1].substring(6,10)}-${n[1].substring(0,2)}-${n[1].substring(3,5)}`,i=n[2].replace(/-/g,":"))):(t=/(\d{8})-(\d{6})\.(zip|gz)/,n=e.match(t),n&&n.length>2&&(o=`${n[1].substring(0,4)}-${n[1].substring(4,6)}-${n[1].substring(6,8)}`,i=`${n[2].substring(0,2)}:${n[2].substring(2,4)}:${n[2].substring(4,6)}`)),o&&i){const e=`${o}T${i}`;return console.log(e),new Date(e)}return null}var D=n(89);const $=(0,D.Z)(m,[["render",v]]);var _=$;const O=e=>((0,i.dD)("data-v-0e2d7394"),e=e(),(0,i.Cn)(),e),k={class:"log-viewer"},L=O((()=>(0,i._)("h2",null,"BlueOS System Log Viewer",-1))),S={key:0,class:"log-content"},F={key:1,class:"no-log"};function z(e,t,n,o,l,a){return(0,i.wg)(),(0,i.iD)("div",k,[L,n.logData&&n.logData.length?((0,i.wg)(),(0,i.iD)("div",S,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.logData,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{key:t,class:"log-entry"},[(0,i._)("h3",null,(0,r.zw)(e.serviceName)+" - "+(0,r.zw)(o.formatDate(e.dateTime)),1),(0,i._)("pre",null,(0,r.zw)(e.content),1)])))),128))])):((0,i.wg)(),(0,i.iD)("div",F," No logs to display. "))])}var N={props:{logData:Array},setup(){const e=(0,i.MW)({logData:{type:Array,default:()=>[]}}),t=e=>e?e.toLocaleString():"";return{...e,formatDate:t}}};const T=(0,D.Z)(N,[["render",z],["__scopeId","data-v-0e2d7394"]]);var j=T,U={components:{FileUpload:_,LogViewer:j},setup(){const e=(0,d.iH)([]),t=(0,d.iH)(""),n=n=>{e.value=n,t.value=n.length>0?n[0].serviceName:""},o=(0,i.Fl)((()=>e.value.filter((e=>e.serviceName===t.value)))),r=(0,i.Fl)((()=>[...new Set(e.value.map((e=>e.serviceName)))]));return{allLogs:e,selectedService:t,filteredLogs:o,availableServices:r,updateLogs:n}}};const W=(0,D.Z)(U,[["render",g]]);var x=W;(0,o.ri)(x).mount("#app")}},t={};function n(o){var i=t[o];if(void 0!==i)return i.exports;var r=t[o]={exports:{}};return e[o].call(r.exports,r,r.exports,n),r.exports}n.m=e,function(){var e=[];n.O=function(t,o,i,r){if(!o){var l=1/0;for(c=0;c<e.length;c++){o=e[c][0],i=e[c][1],r=e[c][2];for(var a=!0,s=0;s<o.length;s++)(!1&r||l>=r)&&Object.keys(n.O).every((function(e){return n.O[e](o[s])}))?o.splice(s--,1):(a=!1,r<l&&(l=r));if(a){e.splice(c--,1);var u=i();void 0!==u&&(t=u)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[o,i,r]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var i,r,l=o[0],a=o[1],s=o[2],u=0;if(l.some((function(t){return 0!==e[t]}))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(s)var c=s(n)}for(t&&t(o);u<l.length;u++)r=l[u],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(c)},o=self["webpackChunkmy_log_viewer"]=self["webpackChunkmy_log_viewer"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(713)}));o=n.O(o)})();
//# sourceMappingURL=app.946c1db2.js.map